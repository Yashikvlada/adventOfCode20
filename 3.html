<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3</title>
</head>
<body>
    <h2>3.1</h2>
    <h4>how many trees would you encounter?</h4>

    <script>
    "use strict"


    var inputStr = `....#...............##...#...#.
        #...#..#.....##.##.#.##....#...
        ...#.....#...#.................
        #..#..#.......#...#.#..........
        ...##..#.#..........##...#.....
        ........###.#.##..#............
        ...###......##.#..#.#...#.#....
        ......##..#.#....#...#.........
        .................#......#......
        ..............##....#..........
        #.....................#...#.#.#
        .##..#............##...##.##..#
        .....#.####...#..##......#.#..#
        #.......#.#..#......##.#.#....#
        .....##...###.#..........##....
        #...........#.##....##.....#..#
        ..###..##.##.....#....#........
        ...#.#.#............#.#..#....#
        #......#....#...##.#.#.#.#..#..
        .......#.#...#..#..#..##......#
        .....#..#.............#..#...#.
        ##..#.##.....#........#........
        ....##....#..#...........#...#.
        .......#........##.......##....
        ..##...#.......#........##.#...
        ..........#..#.....##........#.
        ..#..##..#............#........
        .#.#...#...#.......#......#....
        ....#....#.....#.#.........###.
        .............#...#....#..#.#...
        ##.#...#..#......#.#.##.....#..
        #...##.#..........#..#.#...#...
        #####.......#.#.....#..#.......
        #...#...#........#....#...#....
        ......##.#..#..#............#..
        ....#....#.......#...###.......
        .#......##...#.##....#...#.....
        ..#....#...##.....#.#...##.#...
        #.......#........#.####........
        #.##..#..#.........#.#........#
        .#...#.#.#.#......#....#.#..#..
        #...####...##.##.#....#......##
        ..#...#......##........#.....#.
        ...#.#....##...................
        ...##................#.........
        ...##.....##........#....#..#..
        .........#..#.....#............
        .#..#.......................#..
        .#.........#..##........#.#.#.#
        ......#.....##..#.##...#..#.##.
        ..#..............##.......#....
        ...............##....#...##..#.
        ###...#..###.........#...#.....
        ...#..#...#....#.....##........
        ....#..##...#........#.........
        ..#......#.......#.....#..#....
        .#...........##.....###....#...
        .#..#.....##.........##.....#..
        ....##.#.....#................#
        ..#..#......#.#..#....#..##....
        #.....#...##............#......
        .#.............#....#.......#..
        #.........#..#...##.#...#.#.##.
        ...#......#..####....#.#.....#.
        ......#........#..........##.##
        ......##.#..##.##.....#........
        ##.....#..##.##..#.......##....
        .##.........#...........#...#..
        .....#...###..#...#...........#
        ..........#.#......#.###.....#.
        ...#.............#.##......##..
        #.##.........#..###...........#
        ....#..##....#..#..#........###
        ...#........##.......##..#..#..
        ...#......#..#.#...............
        #......###....#.#..#.#..#....#.
        #.#.####.#.........#..#.#.#....
        .....#....#...............#...#
        .#........#......#.#...#.......
        ................#...#.....##...
        .............#...####..........
        .................##....##.###..
        #................#......#......
        .###.#........#..##.....#..###.
        ..#.#..#...#..#.#...#.#.....#.#
        .....#............#..##..#..#.#
        #........##.#...#.....#........
        #.#.#..###......###............
        ...#..#...........##...#.....#.
        ......#........#...#.#....#....
        ....#..........#.#..#.#....##..
        ...#.....##..#......#.#.##...#.
        .........#..#................#.
        ..#....#.##.....#.......#......
        ...#.....#.......##.##.....#...
        #...#..............#..###..#...
        #.#......#.#....#........##..#.
        ...#...##...##..#.........#....
        ..#...#......##.#.#.#....##....
        #.......#.......#..#..#........
        .........#..#.....#....#.....##
        .#......#.......#.#..#..#...#.#
        ..#....#.#..#..................
        #.....####..........#.#.....#.#
        .#..#.#.#....#.#.....#.#.......
        ....##......#..#.....#.#.#...#.
        ...##...#......##.#....##.#....
        ..#..##....#...#...........#...
        .......#........#...##.#.......
        #.#..#....##.#....##...........
        .......#............#..##..##..
        #.#.#.....#....##.#.#.#.....#..
        ##...#...#.......#..#...#.....#
        ##..##.##..........#........##.
        ..............#.....#..#..##...
        .......#...#.........#....#.#..
        ...#..#..#....#.#....##........
        ..#.......#....#....##.........
        #...#.....#..#.#...##....#.....
        .....##..#..##..#..............
        .....##............#....#.#....
        ..#.....#....##.#.....#..#.....
        #...#..#..#......#.#.#..##.....
        .............................##
        #...#.#................#....#.#
        .#.#.#....##......###..##......
        #.....#..#.##.#.#.##...###.....
        .........#............##..#....
        .#..#...#....#.....#.#........#
        ...............#......#..#.....
        ...................###........#
        .###..##..##.......#.#.........
        #.........#......#....#.#...#..
        .#.#....#.......#.#..##...##...
        .#.....#....##.......#.#.....#.
        .........#...#....#.#..........
        ....###..#..##.#...##....#..#..
        ...#.#..##.#.........###.#..#..
        #...#...........#....#.........
        ....##...........#.#.#......###
        #....#...........##..#.........
        ###....#.....#.......#....###..
        .#.......#....#.#.#.#......#.#.
        ........#...............#.#.#..
        ....#.........#.....#...##.##.#
        ...#............#.............#
        ..........#..#.................
        ........#.....##............#.#
        ..#...##........#...#.....#.#..
        ....#........#.#.#..........#..
        #.#...#...........#............
        ....#.#...##...........#.....#.
        ...........#.#..#.....#........
        .....#..#..#..#.....#.#.....#.#
        #.....#.......#.......#...#....
        #.........#....#.#........#..#.
        ...#..#.........#.....#..#.....
        ...#..#.............#..........
        .#.......#..........#.....#...#
        .....#.#......#.......#....#...
        ...#.....#..#..##....##....#...
        .#.#.#..#...#.....#....#.......
        ..##.#..........#.....#.#......
        ..#..#.............#...##..##..
        .#.............#..#....##...#..
        ..#...#.....#.................#
        ..##.......#.....#...#....#....
        .#..#.##.........#...#.#...#...
        ...##.......##..#.....##.##...#
        ........####.#.........#.......
        ..#.#...##.#..#..#.......##.#..
        .#..#............###..#..#.....
        #.....#.#...#.#.......#........
        ..........#......#.#...#...#...
        ..#......#..#..#.#...#.........
        ..###........#.#....#.#...##...
        .#.....#..#.#......#........#..
        .#...#..#...#....#.......#..#..
        ..#....#..#.....#.#........#...
        #..#.#.........#..........#..#.
        .#.....##....#.........#.#.#.#.
        #.#...#.....#.#.#....#.#..#....
        .........#...................#.
        ..#.....#..##...#..........#.#.
        ..............#....#.........#.
        .#....#.....#..............##..
        #...#...#.#........##.........#
        ....###....#.#....#.#.........#
        .....#........#.....##.........
        .#...##..##..#.........##......
        ............#.....#........#...
        ..#....#.......#......#..#.#.#.
        #.......#.#...........#..##.#..
        ......#.##......#....#.......#.
        .....#........#...###.....#....
        ###..........#........#.#.#....
        .....#...#.#...#...#...##.....#
        .##...#.#........#.#....#......
        ......#.........#.....#.#......
        .....#.##.....###.#...#...##..#
        .#.#.......##....#..#..#.##....
        .####...###.#.#.#.#............
        ......#..##...#..........#.##.#
        ......#............#...........
        .....#.#..#.......##...##......
        ......#........#..#....#.#.#.#.
        #..#..#.....#..#.....#.......#.
        .#...#.....#..............#....
        .#....#..#.##.#............####
        ..........#....#.##...#.#......
        ...#.#.#.#.#.......#.........#.
        ##........#..##..#.........#...
        ..#......#...#..#.#.....#......
        ..#.#......#...#...#.#.........
        ........................##.....
        ...#.##.#........#...#.......#.
        ..#.#......#....##........#.#..
        #......#.##........#..#......#.
        .....#..#..#.............#.....
        ......#......#........#....#...
        ...#....###.....#..#.#....#....
        #.......................#....#.
        ..#...#...................#....
        ....#..#.....##.#..#...#.....#.
        ...#.........#...#.......#.....
        ..#....#.....#...#...#.#####...
        .....####......#...........#...
        ......#.#..........#...#.#.#..#
        ###..#.#....#..#...............
        ...#...###..#..#.#.#...........
        .....#...#.##.#.#.###..##......
        .........#...........#....##.#.
        ....#..#......#................
        ...........#..#..#...#.#.......
        ..#.....#......##.###..........
        .........#...................#.
        ..........#...#.#....##........
        ..#...##....#....#.......#...##
        #......#.....#...#...#...#.....
        ....##...#.#.......#.#...##....
        ...#.....#....#.....#....#.....
        #....##.....##..##..........##.
        .....#.....#.#.#...............
        .#.##....#.....#.#..#....#..##.
        .....#.#.....##....#...........
        .........#..#.......##..##.....
        ..#....##.....###...#....#.#...
        ............#......#.#...#..#..
        #..##......#.#.##....#.#.......
        .#.#.....#...#.#.#....#.....#..
        #....#..#.#....#...#...........
        ......#.#.....#...#.#.#......#.
        ###..#....#.###.............#..
        ..............#####........###.
        ..#..#.#.#.#......#......#.....
        ###.........#.#..........#..#.#
        .#.........#...#......####.....
        ..#.......####..#....#...#..#..
        #.#..#.#...............#.#.#.#.
        ###....#.....##.#....#......##.
        ..#..#........#....###.#.#.....
        ...#.#..........#.....#...#....
        ....#......##.#............#..#
        ...##...#.....#..##....#..#.#.#
        .......#.....#..#....#....##.#.
        .#..#....#..#......##....##...#
        ..#......#...#.#..###..#.##....
        #...#.....#......##...#.......#
        .....#.#.....#...##............
        .#..##.##..#..##.#........#....
        ....#.#......##...#.#.#.#..##..
        .#..............##........#....
        .##....#..#..#....#...#......#.
        ............###....##.......##.
        ..............####.....#.......
        ........##..##.#...#.......#...
        ....#..#.....##.......#####...#
        .##..##..#.....#...#..#..#....#
        ##..#.#.#...........#..........
        #..#......#...#....#...........
        ...#..##.#..........#..#.......
        ........#.#.....#......##......
        .....#....#............#.......
        .#.#..#....##......#.......###.
        .#..#.#........#......#...##..#
        ...#....#......#..#........#.##
        .........#..#...#..#.#.##......
        ....###.#...........#...#......
        .##............#.......#..##...
        ##...#.#...............#.#...##
        ..#..#.....#.#..#..#...........
        ..#..#.##..#......#.##..#.#....
        ..#...#......#.#...#....##.#...
        ...###....####......#....#...#.
        .......##........#.....##....#.
        .........##..........#...#.....
        .....#............#.##.#....#.#
        ..........#...#....##..........
        ....................#......#...
        #......#..#...#.............##.
        ...........#...................
        ..#...#.........#.##.#..##.#...
        #.#....#.#.....#............#..
        .#..#.....#.....####......#.#..
        #....#.......##..#...........#.
        ............#...#.....#..#.#...
        #...........#...#####....#...#.
        ..........#...###..##.........#
        #.....###............#..#..#.#.
        ...##.....#....#......#.....#..
        #....#.......#..#......###...#.
        ...##.##......##..##..........#
        .......#.#..#.#..#.#.#.#..#..#.
        ..#..###...#....#.....#......#.
        ...#.........#..#.##.#.....###.
        ..#.........#.##.#..#..#..###..
        ..####..#.........#.........#.#
        ..#.#...#.......#....##........
        .#......#.#....................
        ..........#.......#.#..#..#....
        ..#........#....#.#..#.........
        ..#.....#.............#....#...
        ##...#.........#.....#...#.....`;
    
    //тестовый набор = 7

    // var inputStr = `..##.........##.........##.........##.........##.........##.......
    // #...#...#..#...#...#..#...#...#..#...#...#..#...#...#..#...#...#..
    // .#....#..#..#....#..#..#....#..#..#....#..#..#....#..#..#....#..#.
    // ..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#
    // .#...##..#..#...##..#..#...##..#..#...##..#..#...##..#..#...##..#.
    // ..#.##.......#.##.......#.##.......#.##.......#.##.......#.##.....
    // .#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#
    // .#........#.#........#.#........#.#........#.#........#.#........#
    // #.##...#...#.##...#...#.##...#...#.##...#...#.##...#...#.##...#...
    // #...##....##...##....##...##....##...##....##...##....##...##....#
    // .#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#`;
    
    //будем использовать не двухмерный массив, а масссив строк (хотя это одно и тоже)
    var stripes = inputStr.split(/\n\s+/);
    
    function CalcTrees(rightIncr = 3, downIncr = 1, startPosX = 0, startPosY = 0){

        function CalcTreesRecurs(rightPos, downPos){
            //достигли дна
            if(downPos >= stripes.length)
                return 0;

            //вылезли справа, смещаем по X в начало + сдвиг
            if(rightPos >=stripes[downPos].length)
                rightPos = rightPos - stripes[downPos].length;

            //считаем деревья
            if(stripes[downPos][rightPos]=='#')
                return 1 + CalcTreesRecurs(rightPos + rightIncr, downPos + downIncr);
            else
                return 0 + CalcTreesRecurs(rightPos + rightIncr, downPos + downIncr);
        }

        return CalcTreesRecurs(startPosX, startPosY);
    }

    document.write(`<h1>Answer for 3.1: ${CalcTrees(3,1)}</h1>`);

    document.write("<h2>2.2</h2>");

    var multPath = CalcTrees(1,1)*CalcTrees(3,1)*CalcTrees(5,1)*CalcTrees(7,1)*CalcTrees(1,2);

    document.write(`<h1>Answer for 3.1: ${multPath}</h1>`);

    </script>   
</body>
</html>